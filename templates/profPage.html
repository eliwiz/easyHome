{% extends "base.html" %}
{% block title %}{{ id }}{% endblock %}

{% block content %}
<br><br><br><br><br><br><br><br>
<div class="container row">
    <div class="col-6">
      <h1>ID</h1>
      
    </div>
    <div class="col-6">
      <div id="response"></div>
    </div>

</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
      const zipcode = prompt("Please enter your ZIP code:");
      if (zipcode) {
          // Send the ZIP code to the Flask app
          fetch("/professional/{{id}}", {
              method: "POST",
              headers: {
                  "Content-Type": "application/x-www-form-urlencoded",
              },
              body: `zipcode=${encodeURIComponent(zipcode)}`,
          })
          .then(response => response.json())
          .then(data => {
              if (data.iframe) {
                  document.getElementById("response").innerHTML = data.iframe;
              } else if (data.error) {
                  document.getElementById("response").textContent = data.error;
              }
          })
          .catch(error => {
              console.error("Error:", error);
              document.getElementById("response").textContent = "An error occurred.";
          });
      } else {
          document.getElementById("response").textContent = "No ZIP code entered.";
      }
  });
</script>
{% endblock %}
